[General]
# --- GENERAL ---
# Enhanced Wi-Fi Assist
wifi-assist = false

# Latency Benchmark
internet-test-url = http://www.bing.com/
proxy-test-url = http://www.bing.com/
test-timeout = 5

# TLS Engine
tls-provider = openssl

# GeoIP Database
geoip-maxmind-url = https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb


# IPv6 Support
ipv6 = true

# --- Wi-Fi ACCESS ---
//若允许远程访问将 <false> 改为 <true>,仅 iOS
allow-wifi-access = false
allow-hotspot-access = true //无限热点代理
wifi-access-http-port = 6152
wifi-access-socks5-port = 6153

//若允许远程访问将 <127.0.0.1> 改为 <0.0.0.0>,仅 macOS
http-listen = 127.0.0.1:6152
socks5-listen = 127.0.0.1:6153

# --- REMOTE CONTROLLER ---
# Remote Controller
external-controller-access = key@127.0.0.1:8888

# HTTP API & Web Dashboard
//This option allows using HTTP APIs to control
http-api = key@0.0.0.0:6166
//使用 HTTPS 替代 HTTP 协议，需要先配置 MitM 的 CA 证书，同时需要在客户端设备上手动安装并信任 CA 证书。
http-api-tls = false
//开启该选项后可以通过浏览器控制 Surge，本机浏览器输入127.0.0.1:6166
http-api-web-dashboard = true

# --- COMPATIBILITY ---
# 兼容模式
compatibility-mode = False
# 跳过代理
skip-proxy = 127.0.0.1, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, passenger.t3go.cn, localhost, *.local
# 排除简单主机名
exclude-simple-hostnames = true

# --- DNS ---
# The IP addresses of upstream DNS servers
dns-server = 223.5.5.5, 119.29.29.29, 8.8.8.8, system
# 从 /etc/hosts 读取 DNS 记录
read-etc-hosts = true
# The URL of the DNS-over-HTTPS server
doh-server = https://doh.pub/dns-query
# DoH 请求通过代理策略执行
doh-follow-outbound-mode = false

# --- ROUTING ---
# 包含所有网络请求
include-all-networks = false
# 包含本地网络请求
include-local-networks = false

# --- ADVANCED ---
# Log Level
loglevel = notify
# 当遇到 REJECT 策略时返回错误页
show-error-page-for-reject = true
# Always Real IP Hosts
always-real-ip = link-ip.nextdns.io, *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.logon.battlenet.com.cn, *.logon.battle.net, stun.l.google.com
# Hijack DNS
hijack-dns = 8.8.8.8:53, 8.8.4.4:53
# TCP Force HTTP Hosts
force-http-engine-hosts = *.ott.cibntv.net, 123.59.31.1,119.18.193.135, 122.14.246.33, 175.102.178.52, 116.253.24.*, 175.6.26.*, 220.169.153.*
# VIF Excluded Routes
//tun-excluded-routes = 239.255.255.250/32
# VIF Included Routes
//tun-included-routes = 192.168.1.12/32
# 当 Wi-Fi 不是首选网络时 SSID 组策略使用默认策略
use-default-policy-if-wifi-not-primary = false

# 控制当 UDP 流量被匹配到一个不支持 UDP 转发的策略时的行为
#   - DIRECT：回退到 DIRECT 策略（默认）
#   - REJECT：回退到 REJECT 策略
udp-policy-not-supported-behaviour = REJECT

[Replica]
# 抓取流量 => 过滤器 1为开启，0为关闭
# 隐藏 Apple 请求
hide-apple-request = 1
# 隐藏 Crashlytics 请求
hide-crash-reporter-request = 1
# 隐藏 UDP 会话
hide-udp = 1
# 关键词过滤器
//none（关闭关键词过滤器） / whitelist（仅记录包含关键词的请求） / blacklist（仅记录不包含关键词的请求） / pattern（记录匹配通配符的请求）
keyword-filter-type = blacklist
keyword-filter = icloud, ocsp, logs, analytic, imap, adthor, applovin, appnext, talk, dropbox, github, spys, nexdns, 149.154, 91.108

[Proxy]
[Proxy Group]
🚀 节点选择 = select, 🇭🇰 香港节点, 🇨🇳 台湾节点, 🇸🇬 新加坡节点, 🇺🇲 美国节点, 🇯🇵 日本节点, 🇰🇷 韩国节点, 👌 手动切换, direct
👌 手动切换 = select,policy-path=换为自己的订阅链接（仅节点信息）
📹 油管视频 = select, 🚀 节点选择, 👌 手动切换, 🇸🇬 新加坡节点, 🇭🇰 香港节点, 🇨🇳 台湾节点, 🇯🇵 日本节点, 🇺🇲 美国节点, 🇰🇷 韩国节点, direct
🌐 谷歌 = select, direct, 🚀 节点选择, 🇺🇲 美国节点, 🇭🇰 香港节点, 🇨🇳 台湾节点, 🇸🇬 新加坡节点, 🇯🇵 日本节点, 🇰🇷 韩国节点, 👌 手动切换
🎥 奈飞视频 = select, 🚀 节点选择, 🇸🇬 新加坡节点, 🇭🇰 香港节点, 🇨🇳 台湾节点, 🇯🇵 日本节点, 🇺🇲 美国节点, 🇰🇷 韩国节点, 👌 手动切换, direct
📽 迪士尼视频 = select, 🚀 节点选择, 🇸🇬 新加坡节点, 🇭🇰 香港节点, 🇨🇳 台湾节点, 🇯🇵 日本节点, 🇺🇲 美国节点, 🇰🇷 韩国节点, 👌 手动切换, direct
📺 巴哈姆特 = select, 🇨🇳 台湾节点, 🚀 节点选择, 👌 手动切换, direct
📺 哔哩哔哩 = select, 🎯 全球直连, 🇨🇳 台湾节点, 🇭🇰 香港节点
🌍 国外媒体 = select, 🚀 节点选择, 🇭🇰 香港节点, 🇨🇳 台湾节点, 🇸🇬 新加坡节点, 🇯🇵 日本节点, 🇺🇲 美国节点, 🇰🇷 韩国节点, 👌 手动切换, direct
🌏 国内媒体 = select, direct, 🇭🇰 香港节点, 🇨🇳 台湾节点, 🇸🇬 新加坡节点, 🇯🇵 日本节点, 👌 手动切换
Ⓜ️ 微软服务 = select, direct, 🚀 节点选择, 🇺🇲 美国节点, 🇭🇰 香港节点, 🇨🇳 台湾节点, 🇸🇬 新加坡节点, 🇯🇵 日本节点, 🇰🇷 韩国节点, 👌 手动切换
🍎 苹果服务 = select, direct, 🚀 节点选择, 🇺🇲 美国节点, 🇭🇰 香港节点, 🇨🇳 台湾节点, 🇸🇬 新加坡节点, 🇯🇵 日本节点, 🇰🇷 韩国节点, 👌 手动切换
🎮 游戏平台 = select, 🚀 节点选择, 🇸🇬 新加坡节点, 🇭🇰 香港节点, 🇨🇳 台湾节点, 🇯🇵 日本节点, 🇺🇲 美国节点, 🇰🇷 韩国节点, 👌 手动切换, direct
🎯 全球直连 = select, direct,reject
🛑 广告拦截 = select, reject, direct
🐟 漏网之鱼 = select, direct,🇭🇰 香港节点,🇨🇳 台湾节点,🇸🇬 新加坡节点,🇺🇲 美国节点,🇯🇵 日本节点,🇰🇷 韩国节点
🇭🇰 香港节点 = url-test, policy-regex-filter=香港|Hong Kong, interval=600, tolerance=0, policy-path=换为自己的订阅链接（仅节点信息）
🇺🇲 美国节点 = url-test, policy-regex-filter=美国|United State|US, interval=600, tolerance=50, policy-path=换为自己的订阅链接（仅节点信息）
🇨🇳 台湾节点 = url-test, policy-regex-filter=台湾|Taiwan, interval=600, tolerance=50, policy-path=换为自己的订阅链接（仅节点信息）
🇸🇬 新加坡节点 = url-test, policy-regex-filter=新加坡|狮城|Singapore, interval=600, tolerance=50, policy-path=换为自己的订阅链接（仅节点信息）
🇯🇵 日本节点 = url-test, policy-regex-filter=日本|Japan, interval=600, tolerance=50, policy-path=换为自己的订阅链接（仅节点信息）
🇰🇷 韩国节点 = url-test, policy-regex-filter=韩国|South Korea, interval=600, tolerance=50, policy-path=换为自己的订阅链接（仅节点信息）

[Rule]

AND,((PROTOCOL,UDP),(DEST-PORT,443)),REJECT-NO-DROP
# Download
PROCESS-NAME,aria2c,DIRECT
PROCESS-NAME,fdm,DIRECT
PROCESS-NAME,Folx,DIRECT
PROCESS-NAME,NetTransport,DIRECT
PROCESS-NAME,Thunder,DIRECT
PROCESS-NAME,Transmission,DIRECT
PROCESS-NAME,uTorrent,DIRECT
PROCESS-NAME,WebTorrent,DIRECT
PROCESS-NAME,WebTorrent Helper,DIRECT

RULE-SET,https://raw.githubusercontent.com/rule-airport/quantumult-X-rule/main/QuantumultX/direct.list,🎯 全球直连
RULE-SET,https://raw.githubusercontent.com/rule-airport/quantumult-X-rule/main/QuantumultX/youtube.list,📹 油管视频
RULE-SET,https://raw.githubusercontent.com/rule-airport/quantumult-X-rule/main/QuantumultX/google.list,🌐 谷歌
RULE-SET,https://raw.githubusercontent.com/rule-airport/quantumult-X-rule/main/QuantumultX/microsoft.list,Ⓜ️ 微软服务
RULE-SET,https://raw.githubusercontent.com/rule-airport/quantumult-X-rule/main/QuantumultX/apple.list,🍎 苹果服务
RULE-SET,https://raw.githubusercontent.com/rule-airport/quantumult-X-rule/main/QuantumultX/netflix.list,🎥 奈飞视频
RULE-SET,https://raw.githubusercontent.com/rule-airport/quantumult-X-rule/main/QuantumultX/disney.list,📽 迪士尼视频
RULE-SET,https://raw.githubusercontent.com/rule-airport/quantumult-X-rule/main/QuantumultX/bahumut.list,📺 巴哈姆特
RULE-SET,https://raw.githubusercontent.com/rule-airport/quantumult-X-rule/main/QuantumultX/bilibili.list,📺 哔哩哔哩
RULE-SET,https://raw.githubusercontent.com/rule-airport/quantumult-X-rule/main/QuantumultX/streamingcn.list,🌏 国内媒体
RULE-SET,https://raw.githubusercontent.com/rule-airport/quantumult-X-rule/main/QuantumultX/streaming.list,🌍 国外媒体
RULE-SET,https://raw.githubusercontent.com/rule-airport/quantumult-X-rule/main/QuantumultX/game.list,🎮 游戏平台
RULE-SET,https://raw.githubusercontent.com/rule-airport/quantumult-X-rule/main/QuantumultX/select.list,🚀 节点选择
RULE-SET,https://raw.githubusercontent.com/rule-airport/quantumult-X-rule/main/QuantumultX/adblock.list,🛑 广告拦截

ip-cidr, 10.0.0.0/8, direct
ip-cidr, 127.0.0.0/8, direct
ip-cidr, 172.16.0.0/12, direct
ip-cidr, 192.168.0.0/16, direct
ip-cidr, 224.0.0.0/24, direct
GEOIP,US,🇺🇲 美国节点
GEOIP,CN,🎯 全球直连
FINAL,🐟 漏网之鱼

[URL Rewrite]
# Redirect Google Search Service
^https?:\/\/(www.)?(g|google)\.cn https://www.google.com 302

# Redirect Google Maps Service
^https?:\/\/(ditu|maps).google\.cn https://maps.google.com 302
